


{% extends "base.html" %}
{% block content %}
  <h2>Your Wishlist</h2>
  {% if items %}
    <ul>
      {% for item in items %}
        <li>
          <a href="{{ item.product.get_absolute_url }}">{{ item.product.name }}</a> -
          ₹{{ item.product.price }} -
          <form method="post" action="{% url 'wishlist_toggle' item.product.id %}" style="display:inline;">
            {% csrf_token %}
            <button type="submit">Remove</button>

            {% if user.is_authenticated %}
  {% if product in user.wishlist.all.values_list('product', flat=True) %}
    <a href="{% url 'product:remove_from_wishlist' product.id %}" class="btn-wishlist remove">♥ Remove from Wishlist</a>
  {% else %}
    <a href="{% url 'product:add_to_wishlist' product.id %}" class="btn-wishlist add">♡ Add to Wishlist</a>
  {% endif %}
{% else %}
  <a href="{% url 'login' %}?next={{ request.path }}" class="btn-wishlist">♡ Add to Wishlist</a>
{% endif %}

          </form>
        </li>
      {% endfor %}
    </ul>
  {% else %}
    <p>Your wishlist is empty.</p>
  {% endif %}
{% endblock %}

